asyncapi: 3.0.0
info:
  title: "ZenWave Online Food Delivery - Orders Module"
  version: 0.0.1
  tags:
    - name: "Default"
    - name: "Orders"

defaultContentType: application/json

servers:
  development:
    host: localhost:9092
    description: Development AMQP broker.
    protocol: kafka

channels:
  CancelOrdersChannel:
    $ref: "https://raw.githubusercontent.com/EDALearn/FoodDeliveryService-KIT-AsyncAPI-In-Action/asyncapi/2-centralized-channels-http-refs/asyncapi/asyncapi-centralized-channels.yml#/channels/CancelOrdersChannel"
  OrdersChannel:
    $ref: "https://raw.githubusercontent.com/EDALearn/FoodDeliveryService-KIT-AsyncAPI-In-Action/asyncapi/2-centralized-channels-http-refs/asyncapi/asyncapi-centralized-channels.yml#/channels/OrdersChannel"
  OrderUpdatesChannel:
    $ref: "https://raw.githubusercontent.com/EDALearn/FoodDeliveryService-KIT-AsyncAPI-In-Action/asyncapi/2-centralized-channels-http-refs/asyncapi/asyncapi-centralized-channels.yml#/channels/OrderUpdatesChannel"
  # client channels
  KitchenOrdersStatusChannel:
    $ref: "https://raw.githubusercontent.com/EDALearn/FoodDeliveryService-KIT-AsyncAPI-In-Action/asyncapi/2-centralized-channels-http-refs/asyncapi/asyncapi-centralized-channels.yml#/channels/KitchenOrdersStatusChannel"
  DeliveryStatusChannel:
    $ref: "https://raw.githubusercontent.com/EDALearn/FoodDeliveryService-KIT-AsyncAPI-In-Action/asyncapi/2-centralized-channels-http-refs/asyncapi/asyncapi-centralized-channels.yml#/channels/DeliveryStatusChannel"

operations:
  doCancelOrder:
    action: receive
    tags:
      - name: Orders
    channel:
      $ref: '#/channels/CancelOrdersChannel'
  onOrderEvent:
    action: send
    tags:
      - name: Orders
    channel:
      $ref: '#/channels/OrdersChannel'
  onOrderStatusUpdated:
    action: send
    tags:
      - name: Orders
    channel:
      $ref: '#/channels/OrderUpdatesChannel'
  # client operations
  onKitchenOrderStatusUpdated:
    action: receive
    tags:
      - name: RestaurantOrders
    channel:
      $ref: '#/channels/KitchenOrdersStatusChannel'
  onDeliveryStatusUpdated:
    action: receive
    tags:
      - name: Delivery
    channel:
      $ref: '#/channels/DeliveryStatusChannel'
